(function(){$(function(){"use strict";var t;return localStorage.getItem("Version")!==Settings.Version&&(localStorage.clear(),localStorage.setItem("Version",Settings.Version)),null===localStorage.getItem("comments")&&localStorage.setItem("comments",!0),window.globalStyles=(new CSSCreator).addToPage(),Settings.ApplyTheme(),t=new Router,Backbone.history.start(),$("body").on("click","a:not(.normal-link)",function(t){var e;return t.preventDefault(),e=$(this).data("href"),Backbone.history.navigate(e,!0)?void 0:Backbone.history.loadUrl(e)})})}).call(this);
(function(){"use strict";this.Router=this.Backbone.Router.extend({routes:{"":"home",random:"random","story/:storyNumber":"story",info:"info",favorites:"favorites",options:"options"},home:function(){return this.changeTab("allStories"),new Views.HomeView},favorites:function(){return this.changeTab("favorites"),new Views.FavoritesView},random:function(){return this.changeTab("randomStory"),new Views.StoryView({storyNumber:Math.ceil(Math.random()*Settings.CountStories)})},story:function(e){return new Views.StoryView({storyNumber:+e})},options:function(){return this.changeTab("options"),new Views.OptionsView},info:function(){return this.changeTab("info"),new Views.InfoView},changeTab:function(e){return $("header nav li").removeClass("tab-current"),$("#"+e).closest("li").addClass("tab-current")}})}).call(this);
(function(){"use strict";this.Settings={Version:"0.0.5",CountStories:54,ApplyTheme:function(){var e,o,t,l;switch(null===localStorage.getItem("theme")&&localStorage.setItem("theme","1"),localStorage.getItem("theme")){case"1":localStorage.setItem("textColor","#000"),localStorage.setItem("highlightColor","#2578d9"),localStorage.setItem("bgColor","#ffffff");break;case"2":localStorage.setItem("textColor","#babdb6"),localStorage.setItem("highlightColor","#729fcf"),localStorage.setItem("bgColor","#2e3436");break;case"3":localStorage.setItem("textColor","#c8c8c8"),localStorage.setItem("highlightColor","#fefefe"),localStorage.setItem("bgColor","#000000")}return t=new CSSCreator,l=localStorage.getItem("textColor"),e=localStorage.getItem("bgColor"),o=localStorage.getItem("highlightColor"),t.addRules([["body",["color",l],["background-color",e]],["a, a:visited",["color",o]],["a:hover",["color",e],["background-color",o]],["nav ul li.tab-current:before",["background-color",o]],["nav, nav ul li",["border-color",o]],["nav ul li.tab-current",["-webkit-box-shadow","inset 0 3px "+o],["box-shadow","inset 0 3px "+o]]]),globalStyles.replace(t)}}}).call(this);
(function(){"use strict";Backbone.View.prototype=_.extend(Backbone.View.prototype,{getTemplate:function(t,e){var n;return localStorage?(n=null,n?e(_.template(n)):$.get(t,function(n){return localStorage.setItem(t,n),e(_.template(n))})):$.get(t,function(t){return e(_.template(t))})}})}).call(this);
(function(){"use strict";this.Models=this.Models||{},Models.HomeModel=Backbone.Model.extend({defaults:{stories:[]},initialize:function(){return this.attributes.stories[1]="Никогда не стирайте с доски!",this.attributes.stories[2]="Слепой студент.",this.attributes.stories[3]="Мехматовские частушки.",this.attributes.stories[4]="Математический анализ и подсолнечное масло.",this.attributes.stories[5]="Математическая КамаСутра.",this.attributes.stories[6]="Обнадежил&hellip;",this.attributes.stories[7]="Задача про опохмеление.",this.attributes.stories[8]="Банкнота в 10 марок.",this.attributes.stories[9]="Экзаменационные шедевры.",this.attributes.stories[10]="Перевернутый дифференциал.",this.attributes.stories[11]="Кандидат механических наук.",this.attributes.stories[12]="Алкогольная аппроксимация.",this.attributes.stories[13]="Почти как у Пифагора.",this.attributes.stories[14]="Ад и неравномерные тепловые процессы.",this.attributes.stories[15]="Сложное имя.",this.attributes.stories[16]="Цыгане и функциональный анализ.",this.attributes.stories[17]="Вредный преподаватель.",this.attributes.stories[18]="Обычная практика.",this.attributes.stories[19]="Плакат от незванных гостей.",this.attributes.stories[20]="Нули в ведомость.",this.attributes.stories[21]="Два замечательных студента.",this.attributes.stories[22]="Два типа задач.",this.attributes.stories[23]="Переделывай.",this.attributes.stories[24]="Конъюнкция из трех букв.",this.attributes.stories[25]="Надписи на партах.",this.attributes.stories[26]="Памятник Мебиусу.",this.attributes.stories[27]="Буква Ы.",this.attributes.stories[28]="Сокращение.",this.attributes.stories[29]="Аллергия на МатАнализ.",this.attributes.stories[30]="Полярная лиса.",this.attributes.stories[31]="Множитель ёпт.",this.attributes.stories[32]="Чей же это корень?",this.attributes.stories[33]="Эфимерные неизмеримые функции.",this.attributes.stories[34]="Множество меры нуль.",this.attributes.stories[35]="Нобелевские лауреаты по экономике.",this.attributes.stories[36]="Странные иррациональные числа.",this.attributes.stories[37]="Фурьёвые ряды.",this.attributes.stories[38]="Шарообразная диссертация.",this.attributes.stories[39]="Кровавая жатва.",this.attributes.stories[40]="Но попытаться стоит.",this.attributes.stories[41]="Звонил не математик.",this.attributes.stories[42]="Внучка В.Г. Кротова.",this.attributes.stories[43]="Как В.Г. Кротова из комсомола исключали.",this.attributes.stories[44]="Чьих будешь?",this.attributes.stories[45]="Сегодня я буду сверху!",this.attributes.stories[46]="Эквидомоид.",this.attributes.stories[47]="Можно ли причесать ежа?",this.attributes.stories[48]="Если аспирант не защищается.",this.attributes.stories[49]="Тема диссертации.",this.attributes.stories[50]="Антиалкогольный плакат.",this.attributes.stories[51]="Необходимые и достаточные условия.",this.attributes.stories[52]="Действительный и&hellip; действующий.",this.attributes.stories[53]="Три типа ученых.",this.attributes.stories[54]="Мотивирующая пословица."}})}).call(this);
(function(){"use strict";this.Models=this.Models||{},Models.StoryModel=Backbone.Model.extend({defaults:{storyNumber:0},url:function(){return"stories/story_"+this.attributes.storyNumber+".json"}})}).call(this);
(function(){"use strict";this.Views=this.Views||{},Views.FavoritesView=Backbone.View.extend({initialize:function(){return _.bindAll(this,"render"),this.render()},render:function(){return $("#content").html("")}})}).call(this);
(function(){"use strict";this.Views=this.Views||{},Views.HomeView=Backbone.View.extend({initialize:function(){return _.bindAll(this,"render"),this.model=new Models.HomeModel,this.render()},render:function(){return this.getTemplate("templates/home.html",function(e){return function(t){return $("#content").html(t(e.model.toJSON()))}}(this))}})}).call(this);
(function(){"use strict";this.Views=this.Views||{},Views.InfoView=Backbone.View.extend({initialize:function(){return _.bindAll(this,"render"),this.render()},render:function(){return this.getTemplate("templates/info.html",function(i){return $("#content").html(i({prohorovichLink:"http://www.mathnet.ru/php/person.phtml?option_lang=rus&personid=28439",bookLink:"https://drive.google.com/file/d/0BwUmPnTc9bQ1UE9Ob3BsRXBvb0U/view?usp=sharing",semigradskyLink:"http://brainstorage.me/semigradsky",vkJokesLink:"http://vk.com/bsu_mmf_jokes",vkSemigradskyLink:"http://vk.com/semigradsky",mailLink:"mailto:semigradskyd@gmail.com?subject=bsu-mmf-stories",gitStoriesLink:"https://github.com/bsu-mmf/histories",gitMMFLink:"https://github.com/bsu-mmf"}))})}})}).call(this);
(function(){"use strict";this.Views=this.Views||{},Views.OptionsView=Backbone.View.extend({el:"#content",initialize:function(){return this.undelegateEvents(),_.bindAll(this,"render"),this.render()},events:{"change #comments":"changeComments","change #themeSelect":"changeTheme"},render:function(){return this.getTemplate("templates/options.html",function(e){return function(t){return $("#content").html(t({comments:"true"===localStorage.getItem("comments")})),$("#themeSelect").val(localStorage.getItem("theme")||"1"),Settings.ApplyTheme(),$("#textColor").val(localStorage.getItem("textColor")).off("change").on("change",function(t){return e.resetTheme(),e.changeColor("text",t.hex())}),$("#highlightColor").val(localStorage.getItem("highlightColor")).off("change").on("change",function(t){return e.resetTheme(),e.changeColor("highlight",t.hex())}),$("#bgColor").val(localStorage.getItem("bgColor")).off("change").on("change",function(t){return e.resetTheme(),e.changeColor("bg",t.hex())})}}(this))},changeComments:function(e){return localStorage.setItem("comments",e.target.checked),this.render()},changeTheme:function(e){var t;return t=e.target.value,localStorage.setItem("theme",t),this.render()},resetTheme:function(){return $("#themeSelect").val("0"),localStorage.setItem("theme","0")},changeColor:function(e,t){switch(e){case"text":localStorage.setItem("textColor",t);break;case"highlight":localStorage.setItem("highlightColor",t);break;case"bg":localStorage.setItem("bgColor",t)}Settings.ApplyTheme()}})}).call(this);
(function(){"use strict";this.Views=this.Views||{},Views.StoryView=Backbone.View.extend({id:"content",initialize:function(e){return _.bindAll(this,"render"),this.model=new Models.StoryModel({storyNumber:e.storyNumber}),this.model.on("change",this.render),this.model.fetch()},render:function(){return this.getTemplate("templates/story.html",function(e){return function(t){return $("#content").html(t(_.extend(e.model.toJSON(),{comments:"true"===localStorage.getItem("comments")}))),MathJax.Hub.Queue(["Typeset",MathJax.Hub])}}(this))}})}).call(this);